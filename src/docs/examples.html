<CTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=EUC-JP">
  <title>Examples of SimTools packags</title>
</head>
<body>
<h1><span style="font-weight: bold;">Examples of SimTools packags</span></h1>
(for SimTools-1-01 : Last update 2005-05-03 )<br>
<p>
In the examples directory of SimTools package include following example.
<ol>
<li>Examples/JSF_QuickSim<br>
 <ul>
   <li><a href="#jsf_quicksim_exam01">exam01</a>
   <li><a href="#jsf_quicksim_exam02">exam02</a>
   <li><a href="#jsf_quicksim_exam03">exam03</a>
   <li><a href="#jsf_quicksim_exam03">exam04</a>
 </ul>
<li>Examples/Jupiter<br>
 <ul>
   <li><a href="#jupiter_exam01">exam01</a>
 </ul>
<li>Examples/Satellites<br>
 <ul>
   <li><a href="#satellites_exam01">exam01</a>
   <li><a href="#satellites_exam02">exam02</a>
   <li><a href="#satellites_exam03">exam03</a>
   <li><a href="#satellites_exam04">exam04</a>
 </ul>
</ol>  

<b>(Note)</b><br>
To use ROOT and JSF, search pathes of macro files and 
shared libraries, <tt>*.Root.DynamicPAth</tt> and 
<tt>*.Root.MacroPath</tt>, have to be defined.
These variables has to be defined by <tt>.rootrc</tt>
at the home directory or the current directory.
For easy use of examples. SimTools package include
the <tt>.rootrc</tt> file in each directory. 
To use jsf command at directories other than the examples
directory, copy <tt>.rootrc</tt> to your home directory 
or working directory.


<h2>Examples/JSF_QuickSim</h2>
<ol>
<li>
<a name="jsf_quicksim_exam01">
<font color="red" size="+2">JSF_QuickSim/exam01</font><br>
<font size="-1">
<pre>
    Simple UserAnalysis Script.
  This example creates a ntuple, which contains
    (1) Number of generatorparticles(ngen)
    (2) Total energies of charged tracks(ech), gammas(egam), and neutral hadrons(enh)
        from generator particle information
    (3) Total observed energies(evis) and missing Pt(ptmis).
 
  To run this program interactively, do
    $ jsf gui.C
  The JSF control panel will pops up and you will set various parameters interactively.
  Select [File] -> [Start Browser ..], then ROOT's Browser pops up and ntuples can be
  accessed during the interactive execution.
 
  To run this program as a batch job, do
    $ jsf -b -q --maxevt=1000 gui.C
  It will run 1000 events and results are written in a file, jsf.root.
</pre>
</font>
</li>

<li>
<a name="jsf_quicksim_exam02">
<font color="red" size="+2">JSF_QuickSim/exam02</font><br>
<font size="-1">
<pre>
   Simple Analysis Program.  Does same analysis as exam01, namely
  create a root file, containing the ntuple which contains
    (1) Number of generatorparticles(ngen)
    (2) Total energies of charged tracks(ech), gammas(egam), and neutral hadrons(enh)
        from generator particle information
    (3) Total observed energies(evis) and missing Pt(ptmis).
  
  To build this program and to run do,
   $ xmkmf -a
   $ make
   $ jsf -b -q --maxevt=100 gui.C
  
  where --maxevt option defines a number of events to simulate and analize.
  
This program was created from a sample program generated by buildjsf command. 
</pre>
</font>
</li> 

<li>
<a name="jsf_quicksim_exam03">
<font color="red" size="+2">JSF_QuickSim/exam03</font><br>
<font size="-1">
<pre>
examples/JSF_QuickSim/exam03
 
Example to run JSF generator and calculate Pt sum and Thrust of
event and display histograms interactively.  To run it, do
 
$ jsf gui.C
</pre>
</font>
</li>

<li>
<a name="jsf_quicksim_exam04">
<font color="red" size="+2">JSF_QuickSimm/exam04</font><br>
<font size="-1">
<pre>
examples/JSF_QuickSim/exam04
 
A complex example including jet clustering, event shape analysis,
and vertexing using ZVTOP program.  

To build and run program, do as follows.

[1] $ xmkmf -a
[2] $ make

[3] $ jsf -b -q --maxevt=10000 gui.C
  --> This generates 10k events of ZH events and save event parameters
      in a file, jsf.root

[4] $ mv jsf.root anal.root
  --> rename jsf.root to anal.root

[5] $ jsf plot2.C
  --> analize information saved in a file, anal.root and calculate
      chisq, higgs mass, etc and saves them in a file, plotdata.root
      as a ntuple file.

[6] $ jsf plotdata.root
    root [0] ntuple->Draw("mh","chisq<25");
   
    This will create a figure of Higgs mass distribution,
    selected from 4-jet mode.  In this analysis, chisq is defines as
    
      chisq= ( ( Mz - 91.1)/3 )**2 + ( (Mmm - 91.1)/6 )**2

    where Mz is a invariant mass of a jet pair, and Mmm is 
    a missing mass calculated from a remaining jet pair.

    A sample figure is sample.eps.
</pre>
</font>
</ol>

<! ---------------------------------------------------------->
<h2>Examples/Jupiter</h2>
<ol>
<li>
<a name="jupiter_exam01">
<font color="red" size="+2">Jupiter/exam01</font><br>
<font size="-1">
<pre>
Jupiter example

Example to draw detector geometry using Dawn.

To run, do

$ Jupiter -v 8 showgeom.g4mac

here, option "-v 8" is to suppress lengthy message of geometry initialization.
When completed, it creates an input file for the command dawn, g4_00.prim.
Using this file, dawn command can create an eps file of detector geometry 
by doing,

$ dawn g4_00.prim

Various display options can be specified through a dawn control panel.
</pre>
</font>
</ol>

<! ---------------------------------------------------------->
<h2>Examples/Satellites</h2>
<ol>
<li>
<a name="satellites_exam01">
<font color="red" size="+2">Satellites/exam01</font><br>
<font size="-1">
<pre>
 Run sample programs of jsfj4

 Following example simulates 3 events of single muon by jsfj4.

 Events are generated by an event generator implemented in Geant4.
 Parameters of generated events, together with other options
 for Geant4 are defined in a file, rungun.mac.

 Other parameters are defined in a file, jsf.conf, which includes
  - Output File name  ( default=jsfj4.root )
  - Which detector will be included in the simulation.

 Number of generated events are specified by the "--maxevt=" option in the
 following command.
 
$ jsf -b -q --maxevt=3 --g4macro=rungun.mac gui.C
</pre>
</font>

<li>
<a name="satellites_exam02">
<font color="red" size="+2">Satellites/exam02</font><br>
<font size="-1">
<pre>
  Run sample programs of jsfj4

 Following example simulates 3 events of e+e- -> mu+ mu- events.
 
 The option "--generator=0" switch off the generator implemented
 in Jupiter.  Instead, it switch on generator implemented in JSF.

 Type of generator in JSF is specified by two lines in the file, jsf.conf
   JSFGUI.Pythia.Process.gammaZ:1
   JSFGUI.Pythia.Decay.Z:13
 
  "JSFGUI.Pythia.Process.gammaZ" flag is interpreted by InitPythia.C file
 in $JSFROOT/macro directory, and when it's value is 1, e+e- ->gamma/Z -> ffbar
 process is executed using Pythia.  Do not set it to 0, since no process is 
 is generated in that case.

  "JSFGUI.Pythia.Decay.Z" parameter secifies the decay mode of Z.  In this case,
  by setting 13, restrict the Z decays only to mu+mu-.  Please see comments in 
  $JSFROOT/macro/default.conf for meanings of other values.

 Similar to the example in exam01 directory, output filename is jsfj4.root,
 as definedin jsf.conf file. 

 At the execution, it reads a file, run.mac, to readin options for Geant4 
 simulation.  In this case, the range cut of simulation is specified to 0.01 mm 
 in run.mac, which is important for calorimeter simulation.
 
$ jsf -b -q --maxevt=10 --generator=0 gui.C
</pre>
</font>

<li>
<a name="satellites_exam03">
<font color="red" size="+2">Satellites/exam03</font><br>
<font size="-1">
<pre>
This file contains an example to run jsfj4 and create slcio output.
To run example, do 

$ jsf -b -q --maxevt=10 --lciofile=jsfj4-qq.slcio gui.C
 
where meaning of arguments are
   -b        : ROOT's option to run as a batch job. 
   -q        : ROOT's option to quit execution at the end of event loop
   --maxevt  : Number of events to generate.
   --lciofile : File name of output lcio file.

Other options such as type of event, center of mass energy, etc
are defined in the file, jsf.conf.  The file in this example
generate e+e- -> q qbar events at Ecm=500 GeV.

This is the alpha release.  Currently, output file contains 
only exact hit information of detector and MC Particle.
The information of MCParticle is not complete becasue 
the information of the source of hits produced by Jupiter 
is not perfect match to the LCIO data model.  So please use 
it with care.
</pre>
</font>

<li>
<a name="satellites_exam04">
<font color="red" size="+2">exam04</font><br>
<font size="-1">
<pre>
examples/Satellites/exam04
 
Example to read StdHep event generator file and
simulate it with Jupiter/JSFJ4

To run, do

  $ jsf -b -q gui.C
 
Sample data is created by an example program in
$JSFROOT/src/opts/stdhep/examples/WriteStdHepPythia

</pre>
</font>

<li>
<a name="satellites_exam05">
<font color="red" size="+2">exam05</font><br>
<font size="-1">
<pre>
examples/Satellites/exam05

Example to display PFO objects, which is esentially same as
$SATELLITESROOT/src/io/jsfj4/example/pfoanl
 
Input file name is defined by the parameter, JSFGUI.InputFileName,
in the file, jsf.conf.  It can be override by the command argument,
--InputFile.  This sample uses file file, created by exam03 program,
jsfj4-qq.root.
 
To run interactively, do
 
 $  jsf gui.C
 
The JSF Control Panel is displayed.  Press [Next Event] button
to read next event and display.

If command is executed as a batch job, like
 $ jsf -b -q gui.C
eps files, with name evdisp_N.eps, are created, where N is
the event number.

</pre>
</font>

<li>
<a name="satellites_exam06">
<font color="red" size="+2">exam06</font><br>
<font size="-1">
<pre>
examples/Satellites/exam06

Satellites/exam06
 
Example of user analysis program to read Calorimeter signal
 
To build and run, do
 
 $ xmkmf -a
 $ make
 $ jsf -b -q gui.C
 
</pre>
</font>

<li>
<a name="satellites_exam07">
<font color="red" size="+2">exam07</font><br>
<font size="-1">
<pre>
examples/Satellites/exam07

Satellites/exam07
 
Example to run a physsim generator and Jupiter in a single
job step.
 
As a sample physsim generator, this example uses an example
in physsim/susy/XCXCSTUDY.  Procudure to run this program is,
 
(1) First step: Bases
  $ cd $KFLIBROOT/susy/XCXCSTUDY
  $ make
    --> XCXCSpring.so is created in the prod directory.
 
  Then
 
  $ cd $KFLIBROOT/susy/XCXCSTUDY/prod
  $ jsf -b -q bases.C
 
  This will run bases program and the file, bases.root,
  is created.  Note that parameters for the bases calculation
  are defined in a file, jsf.conf.
 
 
(2)  Second step: run jsfj4 Jupiter
  1) Copy XCXCSpring.so and bases.root in $KFLIBROOT/susy/XCXCSTUDY/prod
     directory to this directory.
  2) Then do,
     jsf -b -q [options] gui.C
                                                                                
     Note that
     - jsf.conf in this directory defines parameters for Bases
       calculation.  When parameters in $KFLIBROOT/susy/XCXCSTUDY
       are modified, do not forget to modify also parameters in
       jsf.conf of this directory.
                                                                                
</pre>
</font>


</ol>

</body>
</html>
